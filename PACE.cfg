#############################################################
#
#   DEFINITIONS
#
#############################################################
 
Simulation Description        { 'Simulation run control inputs' }

Define Material               { Ore                             }
Define View                   { Mine  View1                     }

Define MatFlowLink            { loadConveyor1    loadConveyor2    loadConveyor3    
                                loadConveyor4    loadConveyor5    loadConveyor6    
                                 COD_Conveyor  CODtoHopper }
Define MatFlowManager         { loadMgr1 } # Only one load manager is needed but 6 matFlowSystems, why?
Define MatFlowSystem          { loadSystem1      loadSystem2      loadSystem3      
                                loadSystem4      loadSystem5      loadSystem6      
                                mfsCOD }
Define MatFlowSource          { oreMine1         oreMine2         oreMine3         
                                oreMine4         oreMine5         oreMine6         }
Define MatFlowStation         { loadStation1     loadStation2     loadStation3     
                                loadStation4     loadStation5     loadStation6     
                                CODStation }
Define StationDestination     { loadStationDest1 loadStationDest2 loadStationDest3 
                                loadStationDest4 loadStationDest5 loadStationDest6 
                                unloadStationDest CODStationDest }
Define TransportManager       { truckMgr }
Define MatFlowLink            { hopperConveyor  plantConveyor }
Define MatFlowManager         { unloadMgr1 }
Define MatFlowSink            { plantSink }
Define MatFlowStation         { unloadStation1 }
Define MatFlowStorage         { unloadHopper1 unloadCOD }
Define MatFlowSystem          { mfsDBtoHopper  mfsHopperToPlant }
Define CargoVehicle           { haulTruck }
Define TransportAssignNode    { intNodeToLoad  intNodeToUnload 
                                taLoad1     taLoad2     taLoad3     
                                taLoad4     taLoad5     taLoad6
                                taWS}
Define TransportDelayNode     { delayWS }
Define TransportLink          { roadIntToUnload  roadUnloadToInt
                                roadIntToLoad1 roadLoad1ToInt
                                roadIntToLoad2 roadLoad2ToInt
                                roadIntToLoad3 roadLoad3ToInt
                                roadIntToLoad4 roadLoad4ToInt
                                roadIntToLoad5 roadLoad5ToInt
                                roadIntToLoad6 roadLoad6ToInt    
                                roadCODToInt  roadIntToCOD 
                                roadCODToUnload  roadUnloadToWS  roadWSToInt }
Define TransportOrigin        { loadOrg1 loadOrg2 loadOrg3
                                loadOrg4 loadOrg5 loadOrg6
                                unloadOrg CODOrg }
Define EntityGenerator        { EntityGenerator1 }
Define FileToMatrix           { MineData }
Define ExponentialDistribution { distNextBreak }
Define TriangularDistribution { distRepairTime }
Define ExpressionThreshold { etTruckKOCOD  etTruckKOUnload  etTruckOKCOD  etTruckOKUnload }

Define Group                  { allLoadOrg allMines allLoadConveyors allLoadStations
                                allLoadRoads allLoadStationDests allLoadSystems } 

#############################################################
#
#   Material Flows - loading
# 
#############################################################

# Load the mineblock data
#MineData DataFile { MineBlocks.dat }
MineData      DataFile                 { MineBlocks.dat }
MineData      AttributeDefinitionList  { { i1  0 } { i2  609 } { i3  889 } 
                                         { i4  1319 } { i5  1809 } { i6  2229 }
                                         { i1l  610 } { i2l  890 } { i3l  1320 } 
                                         { i4l  1810 } { i5l  2230 } { i6l  2634 }
                                         { jwct  5 } { jempty  14 } { jfull  15 } }
MineData      CustomOutputList          { { m1block  this.Value(this.i1) } { m2block  this.Value(this.i2) } 
                                            { m3block  this.Value(this.i3) } { m4block  this.Value(this.i4) } 
                                            { m5block  this.Value(this.i5) } { m6block  this.Value(this.i6) } }

# Distributions
distNextBreak UnitType { TimeUnit }
distRepairTime UnitType { TimeUnit }

# *** ExponentialDistribution ***

distNextBreak RandomSeed { 1 }
distNextBreak MaxValue { 1000  h }
distNextBreak Mean { 100  h }

# *** TriangularDistribution ***

distRepairTime RandomSeed { 2 }
distRepairTime MinValue { 30  min }
distRepairTime MaxValue { 480  min }
distRepairTime Mode { 120  min }

# *** MatFlowLink ***
allLoadConveyors List         { loadConveyor1 loadConveyor2 loadConveyor3 
                                loadConveyor4 loadConveyor5 loadConveyor6 }
allLoadConveyors Manager      { loadMgr1                        }

# *** MatFlowSource ***

allMines List                 { oreMine1 oreMine2 oreMine3 
                                oreMine4 oreMine5 oreMine6 }
allMines Material             { Ore                             }
allMines Manager              { loadMgr1                        }
allMines FlowRate             { 2100 t/h                        }

oreMine1 Next                 { loadConveyor1 }
oreMine2 Next                 { loadConveyor2 }
oreMine3 Next                 { loadConveyor3 }
oreMine4 Next                 { loadConveyor4 }
oreMine5 Next                 { loadConveyor5 }
oreMine6 Next                 { loadConveyor6 }

# *** MatFlowStation (loaders) ***

allLoadStations List            { loadStation1 loadStation2 loadStation3
                                  loadStation4 loadStation5 loadStation6 }
allLoadStations Manager         { loadMgr1                        }
allLoadStations MaterialsToLoad { Ore }

loadStation1 AttributeDefinitionList { {tonnesLim 0[t]} {tempty 10[min]} {tfull 10[min]} {parked FALSE} }
loadStation2 AttributeDefinitionList { {tonnesLim 0[t]} {tempty 10[min]} {tfull 10[min]} {parked FALSE} }
loadStation3 AttributeDefinitionList { {tonnesLim 0[t]} {tempty 10[min]} {tfull 10[min]} {parked FALSE} }
loadStation4 AttributeDefinitionList { {tonnesLim 0[t]} {tempty 10[min]} {tfull 10[min]} {parked FALSE} }
loadStation5 AttributeDefinitionList { {tonnesLim 0[t]} {tempty 10[min]} {tfull 10[min]} {parked FALSE} }
loadStation6 AttributeDefinitionList { {tonnesLim 0[t]} {tempty 10[min]} {tfull 10[min]} {parked FALSE} }

# *** MatFlowSystem ***

allLoadSystems List         { loadSystem1 loadSystem2 loadSystem3 
                                loadSystem4 loadSystem5 loadSystem6 }
allLoadSystems Manager      { loadMgr1                        }
allLoadSystems PeakFlowRate { 2100  t/h                       }
allLoadSystems AvgFlowRate  { 2100  t/h                       }
allLoadSystems MinFlowRate  { 6  t/h                          }
allLoadSystems PeakFlowRate { 4000  t/h }
allLoadSystems AvgFlowRate  { 4000  t/h }

loadSystem1 OriginList      { oreMine1                        }
loadSystem2 OriginList      { oreMine2                        }
loadSystem3 OriginList      { oreMine3                        }
loadSystem4 OriginList      { oreMine4                        }
loadSystem5 OriginList      { oreMine5                        }
loadSystem6 OriginList      { oreMine6                        }

loadSystem1 DestinationList { loadStation1                    }
loadSystem2 DestinationList { loadStation2                    }
loadSystem3 DestinationList { loadStation3                    }
loadSystem4 DestinationList { loadStation4                    }
loadSystem5 DestinationList { loadStation5                    }
loadSystem6 DestinationList { loadStation6                    }

#############################################################
#
#   Material Flows - unloading
# 
#############################################################

# *** MatFlowLink ***

hopperConveyor Manager            { unloadMgr1 }
hopperConveyor Next               { unloadHopper1 }
hopperConveyor FlowRate           { 5  kt/h }

loadConveyor1 Next                { loadStation1 }
loadConveyor2 Next                { loadStation2 }
loadConveyor3 Next                { loadStation3 }
loadConveyor4 Next                { loadStation4 }
loadConveyor5 Next                { loadStation5 }
loadConveyor6 Next                { loadStation6 }

plantConveyor Manager             { unloadMgr1 }
plantConveyor Next                { plantSink }
plantConveyor FlowRate            { 10  kt/h }


# *** MatFlowSink ***

plantSink Manager                 { unloadMgr1 }
plantSink FlowRate                { 5040  t/h }
plantSink Material                { Ore }

# *** MatFlowStation ***

unloadStation1 Manager            { unloadMgr1 }
unloadStation1 Next               { hopperConveyor }
unloadStation1 MaterialsToUnload  { Ore }

# *** MatFlowStorage ***

unloadHopper1 Manager             { unloadMgr1 }
unloadHopper1 Next                { plantConveyor }
unloadHopper1 Capacity            { 300  t }
unloadHopper1 Material            { Ore }

# *** MatFlowSystem ***

mfsDBtoHopper Manager             { unloadMgr1 }
mfsDBtoHopper OriginList          { unloadStation1 }
mfsDBtoHopper DestinationList     { unloadHopper1 }
mfsDBtoHopper PeakFlowRate        { 5040  t/h }
mfsDBtoHopper AvgFlowRate         { 5040  t/h }
mfsDBtoHopper MinFlowRate         { 1  t/h }

mfsHopperToPlant Manager          { unloadMgr1 }
mfsHopperToPlant OriginList       { unloadHopper1 }
mfsHopperToPlant DestinationList  { plantSink }
mfsHopperToPlant PeakFlowRate     { 10  kt/h }
mfsHopperToPlant AvgFlowRate      { 10  kt/h }
mfsHopperToPlant MinFlowRate      { 1  t/h }

#############################################################
#
#   Material Flows - unloading - COD
# 
#############################################################
# *** MatFlowLink ***

COD_Conveyor Manager         { unloadMgr1 }
COD_Conveyor FlowRate        { 10 kt/h }
COD_Conveyor Next            { unloadCOD }

CODtoHopper Manager          { unloadMgr1 }
CODtoHopper Next             { unloadHopper1 }

# *** MatFlowStation ***

CODStation Manager           { unloadMgr1 }
CODStation Next              { COD_Conveyor }
CODStation MaterialsToUnload { Ore }

# *** MatFlowStorage ***

unloadCOD Manager            { unloadMgr1 }
unloadCOD Next               { CODtoHopper }
unloadCOD Capacity           { 300  t }
unloadCOD Material           { Ore }

# *** MatFlowSystem ***

mfsCOD Manager               { unloadMgr1 }
mfsCOD OriginList            { CODStation  unloadCOD }
mfsCOD DestinationList       { unloadCOD  unloadHopper1 }
mfsCOD PeakFlowRate          { 5040  t/h }
mfsCOD AvgFlowRate           { 5040  t/h }
mfsCOD MinFlowRate           { 1  t/h }

# *** StationDestination ***

CODStationDest Manager       { truckMgr }
CODStationDest NextComponent { CODOrg }
CODStationDest Station       { CODStation }


#############################################################
#
#   Vehicles
# 
#############################################################

# *** CargoVehicle ***

haulTruck Manager                     { truckMgr                      }
haulTruck MaxSpeed                    { 100  km/h                     }
haulTruck Length                      { 40  m                         }
haulTruck MinGap                      { 40  m                         }
haulTruck NumberOfCargoes             { 1                             }
haulTruck CapacityList                { { 210  t }                    }
haulTruck LoadingSequence             { 1                             }
haulTruck PartialLoadSequence         {                               }
haulTruck UnloadingSequence           { 1                             }
haulTruck AttributeDefinitionList     { { dest  [unloadStationDest] }
                                        { nextBreak  '1000 [h]' } }
haulTruck NextDestination             { this.dest                     }
haulTruck InitialLocation             {                               }

# *** EntityGenerator ***

EntityGenerator1 NextComponent        { unloadOrg                     }
EntityGenerator1 InterArrivalTime     { 5  min                        }
EntityGenerator1 PrototypeEntity      { haulTruck                     }
EntityGenerator1 BaseName             { truck                         }
EntityGenerator1 MaxNumber            { 18                            }

#############################################################
#
#   Transportation
# 
#############################################################

# *** StationDestination ***

allLoadStationDests List                { loadStationDest1 loadStationDest2 loadStationDest3
                                          loadStationDest4 loadStationDest5 loadStationDest6 }
allLoadStationDests Manager             { truckMgr       }

loadStationDest1 NextComponent          { loadOrg1       }
loadStationDest1 Station                { loadStation1   }
loadStationDest2 NextComponent          { loadOrg2       }
loadStationDest2 Station                { loadStation2   }
loadStationDest3 NextComponent          { loadOrg3       }
loadStationDest3 Station                { loadStation3   }
loadStationDest4 NextComponent          { loadOrg4       }
loadStationDest4 Station                { loadStation4   }
loadStationDest5 NextComponent          { loadOrg5       }
loadStationDest5 Station                { loadStation5   }
loadStationDest6 NextComponent          { loadOrg6       }
loadStationDest6 Station                { loadStation6   }

unloadStationDest Manager               { truckMgr       }
unloadStationDest NextComponent         { unloadOrg      }
unloadStationDest Station               { unloadStation1 }


# *** ExpressionThreshold ***

etTruckKOCOD OpenCondition { ![etTruckOKCOD].Open }

etTruckKOUnload OpenCondition { ![etTruckOKUnload].Open }
etTruckKOUnload InitialOpenValue { FALSE }

etTruckOKCOD OpenCondition { 'notNull([CODOrg].LastVehicle) ? ([CODOrg].LastVehicle.WorkingTime < [CODOrg].LastVehicle.nextBreak) : 1' }

etTruckOKUnload OpenCondition { 'notNull([unloadOrg].LastVehicle) ? ([unloadOrg].LastVehicle.WorkingTime < [unloadOrg].LastVehicle.nextBreak) : 1' }

# *** TransportAssignNode ***

taWS Manager { truckMgr }
taWS Next { roadWSToInt }
taWS AttributeAssignmentList { { 'this.LastVehicle.nextBreak = this.LastVehicle.WorkingTime + [distNextBreak].Value' } }

# *** TransportDelayNode ***

delayWS Manager { truckMgr }
delayWS Next { taWS }
delayWS Duration { distRepairTime }


# *** TransportAssignNode ***

taLoad1 Manager { truckMgr }
taLoad1 Next { roadLoad1ToInt }
taLoad1 AttributeDefinitionList { { change  0 } }
taLoad1 AttributeAssignmentList { 
   { 'this.change = ([loadStation1].TotalContentsAdded >= [loadStation1].tonnesLim)
                               && ([MineData].i1 < [MineData].i1l)' }
   { '[MineData].i1 = this.change ? ([MineData].i1 + 1) : [MineData].i1 ' }
   { '[loadStation1].tonnesLim = this.change && ![loadStation1].parked ? 
                             ([loadStation1].tonnesLim + [MineData].m1block([MineData].jwct)*1[t]) :
                             [loadStation1].tonnesLim ' }
   { '[loadStation1].tempty = [MineData].m1block([MineData].jempty)*1[min]' }
   { '[loadStation1].tfull = [MineData].m1block([MineData].jfull)*1[min]' }
   { '[loadStation1].parked = ([MineData].i1 == [MineData].i1l) && 
                         ([loadStation1].TotalContentsAdded >= [loadStation1].tonnesLim)' }
}

taLoad2 Manager { truckMgr }
taLoad2 Next { roadLoad2ToInt }
taLoad2 AttributeDefinitionList { { change 0 } }
taLoad2 AttributeAssignmentList { 
   { 'this.change = ([loadStation2].TotalContentsAdded >= [loadStation2].tonnesLim)
                               && ([MineData].i2 < [MineData].i2l)' }
   { '[MineData].i2 = this.change ? ([MineData].i2 + 1) : [MineData].i2 ' }
   { '[loadStation2].tonnesLim = this.change && ![loadStation2].parked ? 
                             ([loadStation2].tonnesLim + [MineData].m2block([MineData].jwct)*1[t]) :
                             [loadStation2].tonnesLim ' }
   { '[loadStation2].tempty = [MineData].m2block([MineData].jempty)*1[min]' }
   { '[loadStation2].tfull = [MineData].m2block([MineData].jfull)*1[min]' }
   { '[loadStation2].parked = ([MineData].i2 == [MineData].i2l) && 
                         ([loadStation2].TotalContentsAdded >= [loadStation2].tonnesLim)' }
}

taLoad3 Manager { truckMgr }
taLoad3 Next { roadLoad3ToInt }
taLoad3 AttributeDefinitionList { { change 0 } }
taLoad3 AttributeAssignmentList { 
   { 'this.change = ([loadStation3].TotalContentsAdded >= [loadStation3].tonnesLim)
                               && ([MineData].i3 < [MineData].i3l)' }
   { '[MineData].i3 = this.change ? ([MineData].i3 + 1) : [MineData].i3 ' }
   { '[loadStation3].tonnesLim = this.change && ![loadStation3].parked ? 
                             ([loadStation3].tonnesLim + [MineData].m3block([MineData].jwct)*1[t]) :
                             [loadStation3].tonnesLim ' }
   { '[loadStation3].tempty = [MineData].m3block([MineData].jempty)*1[min]' }
   { '[loadStation3].tfull = [MineData].m3block([MineData].jfull)*1[min]' }
   { '[loadStation3].parked = ([MineData].i3 == [MineData].i3l) && 
                         ([loadStation3].TotalContentsAdded >= [loadStation3].tonnesLim)' }
}

taLoad4 Manager { truckMgr }
taLoad4 Next { roadLoad4ToInt }
taLoad4 AttributeDefinitionList { { change 0 } }
taLoad4 AttributeAssignmentList { 
   { 'this.change = ([loadStation4].TotalContentsAdded >= [loadStation4].tonnesLim)
                               && ([MineData].i4 < [MineData].i4l)' }
   { '[MineData].i4 = this.change ? ([MineData].i4 + 1) : [MineData].i4 ' }
   { '[loadStation4].tonnesLim = this.change && ![loadStation4].parked ? 
                             ([loadStation4].tonnesLim + [MineData].m4block([MineData].jwct)*1[t]) :
                             [loadStation4].tonnesLim ' }
   { '[loadStation4].tempty = [MineData].m4block([MineData].jempty)*1[min]' }
   { '[loadStation4].tfull = [MineData].m4block([MineData].jfull)*1[min]' }
   { '[loadStation4].parked = ([MineData].i4 == [MineData].i4l) && 
                         ([loadStation4].TotalContentsAdded >= [loadStation4].tonnesLim)' }
}

taLoad5 Manager { truckMgr }
taLoad5 Next { roadLoad5ToInt }
taLoad5 AttributeDefinitionList { { change 0 } }
taLoad5 AttributeAssignmentList { 
   { 'this.change = ([loadStation5].TotalContentsAdded >= [loadStation5].tonnesLim)
                               && ([MineData].i5 < [MineData].i5l)' }
   { '[MineData].i5 = this.change ? ([MineData].i5 + 1) : [MineData].i5 ' }
   { '[loadStation5].tonnesLim = this.change && ![loadStation5].parked ? 
                             ([loadStation5].tonnesLim + [MineData].m5block([MineData].jwct)*1[t]) :
                             [loadStation5].tonnesLim ' }
   { '[loadStation5].tempty = [MineData].m5block([MineData].jempty)*1[min]' }
   { '[loadStation5].tfull = [MineData].m5block([MineData].jfull)*1[min]' }
   { '[loadStation5].parked = ([MineData].i5 == [MineData].i5l) && 
                         ([loadStation5].TotalContentsAdded >= [loadStation5].tonnesLim)' }
}

taLoad6 Manager { truckMgr }
taLoad6 Next { roadLoad6ToInt }
taLoad6 AttributeDefinitionList { { change 0 } }
taLoad6 AttributeAssignmentList { 
   { 'this.change = ([loadStation6].TotalContentsAdded >= [loadStation6].tonnesLim)
                               && ([MineData].i6 < [MineData].i6l)' }
   { '[MineData].i6 = this.change ? ([MineData].i6 + 1) : [MineData].i6 ' }
   { '[loadStation6].tonnesLim = this.change && ![loadStation6].parked ? 
                             ([loadStation6].tonnesLim + [MineData].m6block([MineData].jwct)*1[t]) :
                             [loadStation6].tonnesLim ' }
   { '[loadStation6].tempty = [MineData].m6block([MineData].jempty)*1[min]' }
   { '[loadStation6].tfull = [MineData].m6block([MineData].jfull)*1[min]' }
   { '[loadStation6].parked = ([MineData].i6 == [MineData].i6l) && 
                         ([loadStation6].TotalContentsAdded >= [loadStation6].tonnesLim)' }
}


intNodeToLoad Manager                   { truckMgr }
intNodeToLoad Next                      { roadIntToLoad1 roadIntToLoad2 roadIntToLoad3
                                          roadIntToLoad4 roadIntToLoad5 roadIntToLoad6 }
                                          
# intNodeToLoad AttributeAssignmentList { { 'this.FirstVehicle.dest  = sort(|x,y|(x.TotalEntered < y.TotalEntered),
#                                                                           [allLoadStationDests].Members)(1)' } }
intNodeToLoad AttributeAssignmentList {
 'this.FirstVehicle.dest = choose(indexOfMin(
    [roadIntToLoad1].Count + 1000*([loadStation1].Breakdown + [loadStation1].parked),   
    [roadIntToLoad2].Count + 1000*([loadStation2].Breakdown + [loadStation2].parked),
    [roadIntToLoad3].Count + 1000*([loadStation3].Breakdown + [loadStation3].parked),
    [roadIntToLoad4].Count + 1000*([loadStation4].Breakdown + [loadStation4].parked),
    [roadIntToLoad5].Count + 1000*([loadStation5].Breakdown + [loadStation5].parked),
    [roadIntToLoad6].Count + 1000*([loadStation6].Breakdown + [loadStation6].parked)),
 [loadStationDest1], [loadStationDest2], [loadStationDest3],
 [loadStationDest4], [loadStationDest5], [loadStationDest6])'} 

intNodeToUnload Manager                 { truckMgr }
intNodeToUnload Next { roadIntToCOD  roadIntToUnload }
intNodeToUnload AttributeAssignmentList { { 'this.FirstVehicle.dest =
                                             [roadIntToUnload].Count <= 3 ?
                                               [unloadStationDest] :
                                               [CODStationDest]' } }


# *** TransportLink ***

allLoadRoads List                        { roadIntToLoad1 roadLoad1ToInt
                                           roadIntToLoad2 roadLoad2ToInt
                                           roadIntToLoad3 roadLoad3ToInt
                                           roadIntToLoad4 roadLoad4ToInt
                                           roadIntToLoad5 roadLoad5ToInt
                                           roadIntToLoad6 roadLoad6ToInt    }
allLoadRoads Manager                     { truckMgr                         }
allLoadRoads SpeedLimit                  { 60  km/h                         }
allLoadRoads Length                      { 10  km                           }

roadIntToLoad1 Next                      { loadStationDest1                 }
roadIntToLoad2 Next                      { loadStationDest2                 }
roadIntToLoad3 Next                      { loadStationDest3                 }
roadIntToLoad4 Next                      { loadStationDest4                 }
roadIntToLoad5 Next                      { loadStationDest5                 }
roadIntToLoad6 Next                      { loadStationDest6                 }

loadStationDest1 NextComponent           { loadOrg1                 }
loadStationDest2 NextComponent           { loadOrg2                 }
loadStationDest3 NextComponent           { loadOrg3                 }
loadStationDest4 NextComponent           { loadOrg4                 }
loadStationDest5 NextComponent           { loadOrg5                 }
loadStationDest6 NextComponent           { loadOrg6                 }

roadIntToUnload Manager                  { truckMgr                         }
roadIntToUnload SpeedLimit               { 60  km/h                         }
roadIntToUnload Next                     { unloadStationDest                }
roadIntToUnload Length                   { 300  m                           }

roadLoad1ToInt Next                      { intNodeToUnload                  }
roadLoad2ToInt Next                      { intNodeToUnload                  }
roadLoad3ToInt Next                      { intNodeToUnload                  }
roadLoad4ToInt Next                      { intNodeToUnload                  }
roadLoad5ToInt Next                      { intNodeToUnload                  }
roadLoad6ToInt Next                      { intNodeToUnload                  }

roadUnloadToInt Manager                  { truckMgr                         }
roadUnloadToInt SpeedLimit               { 60  km/h                         }
roadUnloadToInt Next                     { intNodeToLoad                    }
roadUnloadToInt Length                   { 100  m                           }

roadCODToInt OperatingThresholdList { etTruckOKCOD }

roadCODToUnload OperatingThresholdList {  }
roadCODToUnload Manager { truckMgr }
roadCODToUnload Length { 1000  m }
roadCODToUnload Next { roadUnloadToWS }
roadCODToUnload WaitingAllowed { TRUE }

roadUnloadToInt OperatingThresholdList { etTruckOKUnload }

roadUnloadToWS OperatingThresholdList { etTruckKOUnload }
roadUnloadToWS Manager { truckMgr }
roadUnloadToWS Length { 100  m }
roadUnloadToWS SpeedLimit { 60  km/h }
roadUnloadToWS Next { delayWS }
roadUnloadToWS WaitingAllowed { TRUE }

roadWSToInt Manager { truckMgr }
roadWSToInt Length { 100  m }
roadWSToInt Next { intNodeToLoad }


# *** TransportOrigin ***

allLoadOrg List                          { loadOrg1 loadOrg2 loadOrg3 loadOrg4 loadOrg5 loadOrg6  }
allLoadOrg Manager                       { truckMgr        }
loadOrg1 Next                            { taLoad1  }
loadOrg2 Next                            { taLoad2  }
loadOrg3 Next                            { taLoad3  }
loadOrg4 Next                            { taLoad4  }
loadOrg5 Next                            { taLoad5  }
loadOrg6 Next                            { taLoad6  }

unloadOrg Manager                        { truckMgr        }
unloadOrg Next                           { roadUnloadToInt
                                           roadUnloadToWS }


roadCODToInt Manager                     { truckMgr        }
roadCODToInt Length                      { 100  m          }
roadCODToInt SpeedLimit                  { 60  km/h        }
roadCODToInt Next                        { intNodeToLoad   }

roadIntToCOD Manager                     { truckMgr        }
roadIntToCOD Length                      { 100  m          }
roadIntToCOD MaxVehicles                 {                 }
roadIntToCOD SpeedLimit                  { 60  km/h        }
roadIntToCOD Next                        { CODStationDest  }

CODOrg Manager                           { truckMgr        }
CODOrg Next                              { roadCODToInt
                                           roadCODToUnload }

#############################################################
#
#   END OF MODEL
# 
#############################################################

RecordEdits

Define ColladaModel { Axis  Grid100x100 }
Define DisplayEntity { XY-Grid  XYZ-Axis }
Define OverlayClock { Clock }
Define OverlayText { Title }
Define Text { COD_label  COD_label_Copy1  COD_label_Copy1_Copy1  WS_label }

Define EntityLabel { CODOrg.Label  CODStation.Label  CODStationDest.Label  COD_Conveyor.Label  CODtoHopper.Label  EntityGenerator1.Label  MineData.Label  Ore.Label  haulTruck.Label  hopperConveyor.Label  intNodeToLoad.Label  intNodeToUnload.Label  loadConveyor1.Label  loadConveyor2.Label  loadConveyor3.Label  loadConveyor4.Label  loadConveyor5.Label  loadConveyor6.Label  loadMgr1.Label  loadOrg1.Label  loadOrg2.Label  loadOrg3.Label  loadOrg4.Label  loadOrg5.Label  loadOrg6.Label  loadStation1.Label  loadStation2.Label  loadStation3.Label  loadStation4.Label  loadStation5.Label  loadStation6.Label  loadStationDest1.Label  loadStationDest2.Label  loadStationDest3.Label  loadStationDest4.Label  loadStationDest5.Label  loadStationDest6.Label  loadSystem1.Label  loadSystem2.Label  loadSystem3.Label  loadSystem4.Label  loadSystem5.Label  loadSystem6.Label  mfsCOD.Label  mfsDBtoHopper.Label  mfsHopperToPlant.Label  oreMine1.Label  oreMine2.Label  oreMine3.Label  oreMine4.Label  oreMine5.Label  oreMine6.Label  plantConveyor.Label  plantSink.Label  roadCODToInt.Label  roadIntToCOD.Label  roadIntToLoad1.Label  roadIntToLoad2.Label  roadIntToLoad3.Label  roadIntToLoad4.Label  roadIntToLoad5.Label  roadIntToLoad6.Label  roadIntToUnload.Label  roadLoad1ToInt.Label  roadLoad2ToInt.Label  roadLoad3ToInt.Label  roadLoad4ToInt.Label  roadLoad5ToInt.Label  roadLoad6ToInt.Label  roadUnloadToInt.Label  taLoad1.Label  taLoad2.Label  taLoad3.Label  taLoad4.Label  taLoad5.Label  taLoad6.Label  truckMgr.Label  unloadCOD.Label  unloadHopper1.Label  unloadMgr1.Label  unloadOrg.Label  unloadStation1.Label  unloadStationDest.Label }






# *** GRAPHICS INPUTS ***

Simulation RealTime { TRUE }
Simulation SnapToGrid { TRUE }
Simulation RealTimeFactor { 262144 }
Simulation ShowLabels { FALSE }
Simulation ShowSubModels { FALSE }
Simulation ShowReferences { FALSE }
Simulation ShowEntityFlow { FALSE }
Simulation ShowModelBuilder { TRUE }
Simulation ShowObjectSelector { TRUE }
Simulation ShowInputEditor { TRUE }
Simulation ShowOutputViewer { TRUE }
Simulation ShowPropertyViewer { FALSE }
Simulation ShowLogViewer { TRUE }

etTruckKOCOD Position { 13.9  0.5  0.0  m }
etTruckKOCOD Size { 0.3  0.3  0.0  m }

etTruckKOUnload Position { 12.3  -2.9  0.0  m }
etTruckKOUnload Size { 0.3  0.3  0.0  m }

etTruckOKCOD Position { 13.5  0.5  0.0  m }
etTruckOKCOD Size { 0.3  0.3  0.0  m }

etTruckOKUnload Position { 11.9  -2.9  0.0  m }
etTruckOKUnload Size { 0.3  0.3  0.0  m }

MineData Position { 10.5  3.2  0.0  m }

COD_Conveyor Points { { 13.6  -0.3  0.0  m } { 13.6  -1.9  0.0  m } { 14.2  -1.9  0.0  m } }

CODtoHopper Points { { 15.1  -2.6  0.0  m } { 15.1  -4.6  0.0  m } }

hopperConveyor Points { { 13.9  -3.2  0.0  m } { 14.6  -3.2  0.0  m } { 14.6  -4.5  0.0  m } }

loadConveyor1 Points { { -1.6  0.9  0.0  m } { -0.6  0.9  0.0  m } }

loadConveyor2 Points { { -1.6  -0.1  0.0  m } { -0.6  -0.1  0.0  m } }

loadConveyor3 Points { { -1.6  -1.1  0.0  m } { -0.6  -1.1  0.0  m } }

loadConveyor4 Points { { -1.6  -2.1  0.0  m } { -0.6  -2.1  0.0  m } }

loadConveyor5 Points { { -1.6  -3.1  0.0  m } { -0.6  -3.1  0.0  m } }

loadConveyor6 Points { { -1.6  -4.1  0.0  m } { -0.6  -4.1  0.0  m } }

plantConveyor Points { { 15.8  -5.3  0.0  m } { 16.8  -5.3  0.0  m } }

loadMgr1 Position { 0.3  3.3  0.0  m }

unloadMgr1 Position { 17.4  -0.9  0.0  m }

plantSink Position { 17.4  -5.3  0.0  m }

oreMine1 Position { -2.7  0.9  0.0  m }

oreMine2 Position { -2.7  -0.1  0.0  m }

oreMine3 Position { -2.7  -1.1  0.0  m }

oreMine4 Position { -2.7  -2.1  0.0  m }

oreMine5 Position { -2.7  -3.1  0.0  m }

oreMine6 Position { -2.7  -4.1  0.0  m }

CODStation Position { 13.5  -0.1  0.0  m }

loadStation1 Position { 0.1  0.7  0.0  m }

loadStation2 Position { 0.1  -0.3  0.0  m }

loadStation3 Position { 0.1  -1.3  0.0  m }

loadStation4 Position { 0.1  -2.3  0.0  m }

loadStation5 Position { 0.1  -3.3  0.0  m }

loadStation6 Position { 0.1  -4.3  0.0  m }

unloadStation1 Position { 13.6  -3.2  0.0  m }

unloadCOD Position { 14.9  -1.8  0.0  m }
unloadCOD Size { 1.0  1.2  0.0  m }

unloadHopper1 Position { 14.9  -5.3  0.0  m }
unloadHopper1 Size { 1.0  1.2  0.0  m }

loadSystem1 Position { -4.0  0.8  0.0  m }

loadSystem2 Position { -4.0  -0.1  0.0  m }

loadSystem3 Position { -4.0  -1.1  0.0  m }

loadSystem4 Position { -4.0  -2.1  0.0  m }

loadSystem5 Position { -4.0  -3.1  0.0  m }

loadSystem6 Position { -4.0  -4.1  0.0  m }

mfsCOD Position { 13.9  -2.3  0.0  m }

mfsDBtoHopper Position { 15.9  -1.5  0.0  m }

mfsHopperToPlant Position { 15.9  -4.8  0.0  m }

Ore Position { -2.9  3.2  0.0  m }
Ore FillColour { MediumSeaGreen }

distNextBreak Position { 8.1  -3.5  0.0  m }

distRepairTime Position { 8.1  -4.6  0.0  m }

EntityGenerator1 Position { 7.4  3.2  0.0  m }

haulTruck Position { 2.3  3.2  0.0  m }

CODStationDest Position { 13.5  0.1  0.0  m }

loadStationDest1 Position { 0.1  0.4  0.0  m }

loadStationDest2 Position { 0.1  -0.6  0.0  m }

loadStationDest3 Position { 0.1  -1.6  0.0  m }

loadStationDest4 Position { 0.1  -2.6  0.0  m }

loadStationDest5 Position { 0.1  -3.6  0.0  m }

loadStationDest6 Position { 0.1  -4.6  0.0  m }

unloadStationDest Position { 13.6  -3.0  0.0  m }

intNodeToLoad Position { 9.7  0.1  0.0  m }

intNodeToUnload Position { 9.8  0.9  0.0  m }

taLoad1 Position { 0.5  0.7  0.0  m }

taLoad2 Position { 0.5  -0.3  0.0  m }

taLoad3 Position { 0.5  -1.3  0.0  m }

taLoad4 Position { 0.5  -2.3  0.0  m }

taLoad5 Position { 0.5  -3.3  0.0  m }

taLoad6 Position { 0.5  -4.3  0.0  m }

taWS Position { 9.3  -3.1  0.0  m }

delayWS Position { 9.9  -3.2  0.0  m }

roadCODToInt Points { { 12.7  -0.4  0.0  m } { 9.9  0.1  0.0  m } }

roadCODToUnload Points { { 13.0  -0.7  0.0  m } { 13.1  -3.1  0.0  m } }

roadIntToCOD Points { { 10.1  0.9  0.0  m } { 13.2  0.2  0.0  m } }

roadIntToLoad1 Points { { 9.5  0.2  0.0  m } { 0.1  0.5  0.0  m } }

roadIntToLoad2 Points { { 9.5  0.2  0.0  m } { 0.1  -0.5  0.0  m } }

roadIntToLoad3 Points { { 9.5  0.2  0.0  m } { 0.1  -1.5  0.0  m } }

roadIntToLoad4 Points { { 9.5  0.2  0.0  m } { 0.1  -2.5  0.0  m } }

roadIntToLoad5 Points { { 9.5  0.2  0.0  m } { 0.1  -3.5  0.0  m } }

roadIntToLoad6 Points { { 9.5  0.2  0.0  m } { 0.1  -4.5  0.0  m } }

roadIntToUnload Points { { 9.9  0.9  0.0  m } { 13.4  -2.8  0.0  m } }

roadLoad1ToInt Points { { 0.1  1.0  0.0  m } { 9.5  0.9  0.0  m } }

roadLoad2ToInt Points { { 0.1  0.0  0.0  m } { 9.5  0.9  0.0  m } }

roadLoad3ToInt Points { { 0.1  -1.0  0.0  m } { 9.5  0.9  0.0  m } }

roadLoad4ToInt Points { { 0.1  -2.0  0.0  m } { 9.5  0.9  0.0  m } }

roadLoad5ToInt Points { { 0.1  -3.0  0.0  m } { 9.5  0.9  0.0  m } }

roadLoad6ToInt Points { { 0.1  -4.0  0.0  m } { 9.5  0.9  0.0  m } }

roadUnloadToInt Points { { 12.5  -2.6  0.0  m } { 9.7  0.1  0.0  m } }

roadUnloadToWS Points { { 13.0  -3.2  0.0  m } { 10.4  -3.2  0.0  m } }

roadWSToInt Points { { 9.3  -2.9  0.0  m } { 9.6  -0.2  0.0  m } }

truckMgr Position { 4.1  3.2  0.0  m }

CODOrg Position { 13.0  -0.4  0.0  m }

loadOrg1 Position { 0.1  0.5  0.0  m }

loadOrg2 Position { 0.1  -0.5  0.0  m }

loadOrg3 Position { 0.1  -1.5  0.0  m }

loadOrg4 Position { 0.1  -2.5  0.0  m }

loadOrg5 Position { 0.1  -3.5  0.0  m }

loadOrg6 Position { 0.1  -4.5  0.0  m }

unloadOrg Position { 12.8  -2.8  0.0  m }

# *** ColladaModel ***

Axis ColladaFile { <res>/shapes/axis_text.dae }

Grid100x100 ColladaFile { <res>/shapes/grid100x100.dae }

# *** DisplayEntity ***

XY-Grid Description { 'Grid for the X-Y plane (100 m x 100 m)' }
XY-Grid Size { 100  100  m }
XY-Grid DisplayModel { Grid100x100 }
XY-Grid Show { FALSE }
XY-Grid Movable { FALSE }

XYZ-Axis Description { 'Unit vectors' }
XYZ-Axis Alignment { -0.4393409  -0.4410096  -0.4394292 }
XYZ-Axis Size { 1.125000  1.1568242  1.1266404  m }
XYZ-Axis DisplayModel { Axis }
XYZ-Axis Show { FALSE }
XYZ-Axis Movable { FALSE }

# *** OverlayClock ***

Clock Description { 'Simulation date and time' }
Clock ScreenPosition { 15  15 }
Clock AlignBottom { TRUE }
Clock TextHeight { 10 }
Clock FontColour { gray20 }
Clock FontStyle { ITALIC }
Clock DateFormat { 'yyyy-MMM-dd HH:mm:ss.SSS' }

# *** OverlayText ***

Title Description { 'Title for the simulation model' }
Title ScreenPosition { 15  15 }
Title Format { 'Model Title' }
Title FontColour { 150  23  46 }
Title FontStyle { BOLD }

# *** Text ***

COD_label Position { 16.0  -2.1  0.0  m }
COD_label Size { 1.6  0.4  1.0  m }
COD_label TextHeight { .2  m }
COD_label Format { COD }

COD_label_Copy1 Position { 16.5  -4.2  0.0  m }
COD_label_Copy1 Size { 2.0  0.4  1.0  m }
COD_label_Copy1 TextHeight { .2  m }
COD_label_Copy1 Format { 'Dump Bridge' }

COD_label_Copy1_Copy1 Position { 18.3  -5.3  0.0  m }
COD_label_Copy1_Copy1 Size { 0.9  0.4  1.0  m }
COD_label_Copy1_Copy1 TextHeight { .2  m }
COD_label_Copy1_Copy1 Format { Plant }

WS_label Position { 9.6  -3.8  0.0  m }
WS_label Size { 1.6  0.4  1.0  m }
WS_label TextHeight { .2  m }
WS_label Format { Workshop }

# *** View ***

Mine ViewCenter { 6.0  -0.9  1.732055  m }
Mine ViewPosition { 6.0  -0.9  19.052563  m }
Mine WindowSize { 1478  669 }
Mine WindowPosition { 280  97 }
Mine ShowWindow { TRUE }

View1 Description { 'Default view window' }
View1 ViewCenter { 17.1  2.3  16.61449  m }
View1 ViewPosition { 17.1  2.3  33.934998  m }
View1 ShowWindow { TRUE }
View1 Lock2D { TRUE }
View1 SkyboxImage { <res>/images/sky_map_2048x1024.jpg }

# *** EntityLabel ***

CODOrg.Label Show { FALSE }

CODStation.Label Show { FALSE }

CODStationDest.Label Show { FALSE }

COD_Conveyor.Label Show { FALSE }

CODtoHopper.Label Show { FALSE }

EntityGenerator1.Label Show { TRUE }

MineData.Label Show { FALSE }

Ore.Label Show { FALSE }

haulTruck.Label Show { FALSE }

hopperConveyor.Label Show { FALSE }

intNodeToLoad.Label Show { FALSE }

intNodeToUnload.Label Show { FALSE }

loadConveyor1.Label Show { FALSE }

loadConveyor2.Label Show { FALSE }

loadConveyor3.Label Show { FALSE }

loadConveyor4.Label Show { FALSE }

loadConveyor5.Label Show { FALSE }

loadConveyor6.Label Show { FALSE }

loadMgr1.Label Show { FALSE }

loadOrg1.Label Show { FALSE }

loadOrg2.Label Show { FALSE }

loadOrg3.Label Show { FALSE }

loadOrg4.Label Show { FALSE }

loadOrg5.Label Show { FALSE }

loadOrg6.Label Show { FALSE }

loadStation1.Label Show { FALSE }

loadStation2.Label Show { FALSE }

loadStation3.Label Show { FALSE }

loadStation4.Label Show { FALSE }

loadStation5.Label Show { FALSE }

loadStation6.Label Show { FALSE }

loadStationDest1.Label Show { FALSE }

loadStationDest2.Label Show { FALSE }

loadStationDest3.Label Show { FALSE }

loadStationDest4.Label Show { FALSE }

loadStationDest5.Label Show { FALSE }

loadStationDest6.Label Show { FALSE }

loadSystem1.Label Show { FALSE }

loadSystem2.Label Show { FALSE }

loadSystem3.Label Show { FALSE }

loadSystem4.Label Show { FALSE }

loadSystem5.Label Show { FALSE }

loadSystem6.Label Show { FALSE }

mfsCOD.Label Show { FALSE }

mfsDBtoHopper.Label Show { FALSE }

mfsHopperToPlant.Label Show { FALSE }

oreMine1.Label Show { FALSE }

oreMine2.Label Show { FALSE }

oreMine3.Label Show { FALSE }

oreMine4.Label Show { FALSE }

oreMine5.Label Show { FALSE }

oreMine6.Label Show { FALSE }

plantConveyor.Label Show { FALSE }

plantSink.Label Show { FALSE }

roadCODToInt.Label Show { FALSE }

roadIntToCOD.Label Show { FALSE }

roadIntToLoad1.Label Show { FALSE }

roadIntToLoad2.Label Show { FALSE }

roadIntToLoad3.Label Show { FALSE }

roadIntToLoad4.Label Show { FALSE }

roadIntToLoad5.Label Show { FALSE }

roadIntToLoad6.Label Show { FALSE }

roadIntToUnload.Label Show { FALSE }

roadLoad1ToInt.Label Show { FALSE }

roadLoad2ToInt.Label Show { FALSE }

roadLoad3ToInt.Label Show { FALSE }

roadLoad4ToInt.Label Show { FALSE }

roadLoad5ToInt.Label Show { FALSE }

roadLoad6ToInt.Label Show { FALSE }

roadUnloadToInt.Label Show { FALSE }

taLoad1.Label Show { FALSE }

taLoad2.Label Show { FALSE }

taLoad3.Label Show { FALSE }

taLoad4.Label Show { FALSE }

taLoad5.Label Show { FALSE }

taLoad6.Label Show { FALSE }

truckMgr.Label Show { FALSE }

unloadCOD.Label Show { FALSE }

unloadHopper1.Label Show { FALSE }

unloadMgr1.Label Show { FALSE }

unloadOrg.Label Show { FALSE }

unloadStation1.Label Show { FALSE }

unloadStationDest.Label Show { FALSE }
